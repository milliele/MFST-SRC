/*! real-media-library 16-01-2018 */

jQuery.ajax({url:rmlOpts.ajaxUrl,data:{action:"rml_mce_options",nonce:rmlOpts.nonces.treeContent}}).done(function(l){l.success&&jQuery.extend(rmlOpts,l.data)}),tinymce.PluginManager.add("folder_gallery",function(l,a){l.addCommand("folder_gallery_popup",function(a,e){var o="",t="",n="3",d="",r="";e.fid&&(o=e.fid),e.link&&(t=e.link),e.columns&&(n=e.columns),e.orderby&&(d=e.orderby),e.size&&(r=e.size);for(var i=[],m=1;m<=9;m++)i.push({text:""+m,value:""+m});l.windowManager.open({title:rmlOpts.lang.mceButtonTooltip,body:[{type:"listbox",name:"fid",label:rmlOpts.lang.mceBodyGallery,value:o,values:rmlOpts.mce.raw,tooltip:rmlOpts.lang.mceListBoxDirsTooltip},{type:"listbox",name:"link",label:rmlOpts.lang.mceBodyLinkTo,value:t,values:rmlOpts.lang.mceBodyLinkToValues},{type:"listbox",name:"columns",label:rmlOpts.lang.mceBodyColumns,value:n,values:i},{type:"checkbox",name:"orderby",label:rmlOpts.lang.mceBodyRandomOrder,value:d},{type:"listbox",name:"size",label:rmlOpts.lang.mceBodySize,value:r,values:rmlOpts.lang.mceBodySizeValues}],onsubmit:function(a){if(a.data.fid>=-1&&""!=a.data.fid){var e='[folder-gallery fid="'+a.data.fid+'"';void 0!==a.data.link&&a.data.link.length&&"post"!=a.data.link&&(e+=' link="'+a.data.link+'"'),void 0!==a.data.columns&&"3"!=a.data.columns&&(e+=' columns="'+a.data.columns+'"'),void 0!==a.data.orderby&&1==a.data.orderby?e+=' orderby="rand"':"2"==window.rml.library.getFolderInfo(a.data.fid,"type")&&(e+=' orderby="rml"'),void 0!==a.data.size&&"thumbnail"!=a.data.size&&(e+=' size="'+a.data.size+'"'),e+="]",l.insertContent(e)}}})}),"object"==typeof rmlOpts&&l.addButton("folder_gallery",{icon:"rml-folder-gallery",tooltip:rmlOpts.lang.mceButtonTooltip,onclick:function(){l.execCommand("folder_gallery_popup","",{})}})});