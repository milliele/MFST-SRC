/*! real-media-library 16-01-2018 */

"use strict";function RMLFormat(){var e=arguments;return e[0].replace(/{(\d+)}/g,function(t,o){return void 0!==e[+o+1]?e[+o+1]:t})}function RMLWpIs(e){return void 0!==window.wp&&void 0!==window.wp[e]}function RMLisAIO(e){return e instanceof jQuery&&document.body.contains(e[0])&&e.data("allInOneTree")}function RMLDebug(e){if("object"==typeof rmlOpts&&rmlOpts.debug){var t=jQuery.makeArray(arguments);t.unshift("[RML_DEBUG]"),console.debug?console.debug.apply(console,t):console.log.apply&&console.log.apply(console,t)}}function RMLFindDeep(e,t){for(var o=t.split("."),r=e,i=0;i<o.length;++i){if(void 0==r[o[i]])return;r=r[o[i]]}return r}function RMLUrlParams(e){return function(t){if(""==t)return{};for(var o={},r=0;r<t.length;++r){var i=t[r].split("=",2);2==i.length&&(e&&e.length>0&&jQuery.inArray(i[0],e)>-1||(o[i[0]]=decodeURIComponent(i[1].replace(/\+/g," "))))}return o}(window.location.search.substr(1).split("&"))}Function.prototype.bind=function(){}.bind||function(e){function t(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var o=[].slice,r=o.call(arguments,1),i=this,n=function(){return i.apply(this instanceof t?this:e||window,r.concat(o.call(arguments)))};return t.prototype=this.prototype,n.prototype=new t,n},"function"!=typeof jQuery.fn.replaceWithPush&&(jQuery.fn.replaceWithPush=function(e){var t=jQuery(e);return this.replaceWith(t),t});var RML_HOOK={hooks:[],register:function(e,t){for(var o,r=e.split(" "),i=0;i<r.length;i++)o=r[i],void 0===RML_HOOK.hooks[o]&&(RML_HOOK.hooks[o]=[]),RML_HOOK.hooks[o].push(t)},call:function(e,t,o){if(RMLDebug("Call js hook '"+e+"' with arguments",t),void 0!==RML_HOOK.hooks[e])for(var r=0;r<RML_HOOK.hooks[e].length;++r)if("object"==typeof t){if("[object Array]"===Object.prototype.toString.call(t)?t.push(jQuery):t=[t,jQuery],0==RML_HOOK.hooks[e][r].apply(o,t))break}else if(0==RML_HOOK.hooks[e][r].apply(o,[jQuery]))break},exists:function(e){return void 0!==RML_HOOK.hooks[e]}};window.rml={hooks:RML_HOOK,typeAccept:{}},window.rml.library={attachments:{},lastIdInView:!1,gridViewMediaFrame:!1,updateRestrictions:function(e,t){var o=e.attr("data-restrictions"),r=t.find(".aio-toolbar-placeholder > .fa-warning"),i=rmlOpts.lang.toolbarItems.restrictions;if((o=o&&o.length>0?o.split(","):[]).length>0){var n,a,l="<ul>",s=0;jQuery.each(i,function(e,t){n=!1,a=!1;for(var r=0;r<o.length;r++)if(0===o[r].indexOf(e)){n=!0,">"===o[r].slice(-1)&&(a=!0,s++);break}n&&(l+="<li>"+t,a&&(l+=" <b>*</b>"),l+="</li>")}),l+="</ul>",s>0&&(l+="<b>*</b> "+rmlOpts.lang.toolbarItems.restrictionsInherits);var d={};d.text=rmlOpts.lang.toolbarItems.restrictionsSuffix+l,r.show(),r.attr("data-aio-tooltip-text",d.text),t.allInOneTree("reinit","tooltips")}else r.hide()},initializeToolbar:function(){if(RMLFindDeep(window,"wp.media.view.Attachment.Library")){var e=window.wp,t=e.media.view.Attachment.Library.prototype.render;e.media.view.Attachment.Library.prototype.render=function(){t.apply(this,arguments),window.rml.hooks.call("grid/item/rendered",[this.$el,this.model],this)},e.media.view.AttachmentFilters.RML=e.media.view.AttachmentFilters.extend({className:"attachment-filters attachment-filters-rml",createFilters:function(){var e;if(this.filters=e={all:{text:"All",props:{rml_folder:"",rml_type:""},priority:10}},window.rml.hooks.call("grid/toolbar/filters",[e],this),rmlOpts.namesSlug){var t,o,r=rmlOpts.namesSlug.names,i=rmlOpts.namesSlug.types,n=rmlOpts.namesSlug.slugs;for(t=0;t<r.length;t++)o={rml_folder:n[t],rml_type:i[t]},e[n[t]]={text:r[t],props:o,priority:20+t}}window.rml.hooks.exists("grid/toolbar/default")?window.rml.hooks.call("grid/toolbar/default",[e],this):this.model.set(e.all.props,{silent:!1})}});var o=e.media.view.AttachmentsBrowser;e.media.view.AttachmentsBrowser=e.media.view.AttachmentsBrowser.extend({initialize:function(){o.prototype.initialize.apply(this,arguments),this.collection.on("remove",function(){window.rml.hooks.call("grid/item/removed",jQuery.makeArray(arguments),this)})},createToolbar:function(){var t=jQuery.Deferred();this.$el.data("backboneView",this),this._treeLoaded=t,o.prototype.createToolbar.call(this);var r=new e.media.view.AttachmentFilters.RML({className:"attachment-filters attachment-filters-rml attachment-filters-rml-loaded",controller:this.controller,model:this.collection.props,priority:-75}).render();this.toolbar.set("rml_folder",r);var i;this.collection.on("change reset add remove",function(){clearTimeout(i);var e=arguments;i=setTimeout(function(){window.rml.hooks.call("grid/item/changed",e,this)}.bind(this),500)},this),t.done(function(e){r.initialize()}.bind(this),5e3)}});var r=e.media.view.Modal.prototype.close;e.media.view.Modal.prototype.close=function(){r.apply(this,arguments);var e=this.$el.find(".rml-media-modal").removeClass("rml-media-modal");e.find(".rml-container").remove(),e.find(".attachments-browser").data("initialized",!1)},jQuery(document).ajaxComplete(function(e,t,o){try{o.data.indexOf("action=delete-post")>-1&&this.refreshAllCounts()}catch(e){}}.bind(this)),window.rml.hooks.call("grid/toolbar")}},initializeTreeContentLoader:function(e,t){return this.loadTreeContent(e,t).done(function(e){e.success&&(rmlOpts.namesSlug=e.data.namesSlug)}.bind(this))},sweetAlertPosition:function(){var e=jQuery(".sweet-alert.showSweetAlert");if(e.length>0){var t=e.outerHeight();e.stop().animate({"margin-top":-1*(t/2+8.5)},500)}},getMediaPickerSelected:function(){var e=jQuery,t=null,o=null;return e(".media-modal.wp-core-ui").each(function(){e(this).parent().is(":visible")&&(t=e(this))}),null!==t&&(o=t.find(".attachment-filters.attachment-filters-rml").find(":selected")),o},getObjectOfMediaPickerOrActive:function(){var e=this.getMediaPickerSelected();if(null!==e){var t=e.attr("value");return jQuery(".aio-tree-instance").allInOneTree("byId",t)}return jQuery(".aio-tree-instance").allInOneTree("active")},getUrlParameter:function(e,t){var o,r,i=decodeURIComponent(t||window.location.search.substring(1)).split("&");for(r=0;r<i.length;r++)if((o=i[r].split("="))[0]===e)return void 0===o[1]||o[1]},getFolderInfo:function(e,t){var o=null;try{jQuery.each(rmlOpts.mce.dirs,function(t,r){r.value==e&&(o=r)})}catch(e){}return void 0!==t&&null!==o?o[t]:o},getBackboneOfAIO:function(e){var t,o,r=e.parents(".media-modal");return t=r.length>0?r.find(".attachments-browser"):jQuery("#wpbody-content .attachments-browser"),o=t.data("backboneView"),{browser:t,view:o}},refreshAllCounts:function(){this.refreshCount(jQuery(".aio-tree-instance"))},showShortcutInfo:function(e){var t=jQuery,o=this.showShortcutInfoAppendTo(e,'<div style="height:50px;text-align:center;"><div class="spinner is-active" style="float: initial;margin: 0;"></div></div>');e.addClass("rml-shortcut-info-init"),t.ajax({type:"POST",url:rmlOpts.ajaxUrl,data:{action:"rml_shortcut_infos",nonce:rmlOpts.nonces.shortcutInfo,id:e.attr("data-id")},success:function(t){t.length>0&&(e=o.replaceWithPush(t))}.bind(this)})},showShortcutInfoAppendTo:function(e,t){var o=jQuery,r=e.parents(".attachment-details"),i=e.parents(".media-sidebar");return(i.length>0?i:r.length>0?r:e).find(".rml-shortcut-info-container,rml-shortcut-info-init").remove(),i.length>0?o(t).appendTo(i):r.length>0?o(t).insertAfter(r.children(".attachment-info").children(".settings")):e.replaceWithPush(t)},refreshCount:function(e,t){jQuery.ajax({url:rmlOpts.ajaxUrl,data:{action:"rml_folder_count",nonce:rmlOpts.nonces.folderCount},invokeData:t,success:function(o){o.success&&e.allInOneTree("counts",o.data),"function"==typeof t&&t(o)}})},liveCustomLists:!1,customLists:function(){var e=jQuery;e(".rml-root-list.rml-custom-list:not(.rml-custom-init)").each(function(){e(this).addClass("rml-custom-init"),window.rml.hooks.call("tree/custom",e(this)),void 0!==e(this).attr("id")&&window.rml.hooks.call("tree/custom/"+e(this).attr("data-id"),e(this))}),this.liveCustomLists||(e(document).on("click",".rml-root-list.rml-custom-list a",function(t){var o=e(this).attr("data-id"),r=e(this).parents(".rml-root-list.rml-custom-list");return r.children("input").val(o),r.find("a.active").removeClass("active"),e(this).addClass("active"),t.preventDefault(),!1}),this.liveCustomLists=!0)},iterateDraggedItems:function(e,t,o,r){var i=jQuery;if(t.data("isListMode")){var n=i('input[name="media[]"]:checked');n.length>0?n.each(function(){o(i(this).parents("tr"))}):o(e)}else{var a,l=window.rml.library.getBackboneOfAIO(t);if(l.view){r=r.bind(l);try{a=l.view.options.selection.models}catch(e){}if(a&&a.length>0)for(c=0;c<a.length;c++)r(a[c].attributes);else for(var s=e.data("id"),d=l.view.collection.models,c=0;c<d.length;c++)if(d[c].id==s){r(d[c].attributes);break}}}},loadTreeContent:function(e,t){var o=jQuery,r={action:"rml_tree_content",nonce:rmlOpts.nonces.treeContent,rml_folder:e};return o.post(rmlOpts.ajaxUrl,r)}},window.rml.hooks.register("tree/afterInit/ML",function(){window.rml.hooks.register("grid/item/changed",function(){RMLisAIO(jQuery(this))&&jQuery(this).allInOneTree("reinit","sticky")}.bind(this))}),window.rml.hooks.register("tree/refresh",function(e){var t=window.rml.library.getBackboneOfAIO(e(this));if(t.browser.length>0&&"object"==typeof t.view)try{t.view.collection.props.set({ignore:+new Date})}catch(e){console.log(e)}else window.location.reload()}),window.rml.hooks.register("ready",function(e){window.rml.library.initializeToolbar()}),window.rml.hooks.register("folder/renamed",function(e,t,o,r){r(this).allInOneTree("rename",t),r(this).allInOneTree("active").attr("data-slug",o)}),window.rml.hooks.register("createdBeforeRendering",function(e,t,o){o(this).allInOneTree("loader",!0),window.rml.library.loadTreeContent().done(function(r){if(r.success){var i=o(r.data.nodes);i.length>0&&(o(this).allInOneTree("toolbarButton","rename"),o(this).allInOneTree("nodesHTML",i.html(),!0),o(this).allInOneTree("loader",!1)),rmlOpts.namesSlug=r.data.namesSlug;var n=window.rml.library.getBackboneOfAIO(o(this));"object"==typeof n.view&&n.view.toolbar.get("rml_folder").createFilters(),o(".attachment-filters.attachment-filters-rml").append('<option value="'+t.data.id+'">'+e[0]+"</option>"),window.rml.hooks.call("folder/created",[e,t,r],this)}}.bind(this))}),window.rml.hooks.register("general",function(e,t){jQuery.ajaxPrefilter(function(e,t,o){try{t.data&&t.data.action&&t.data.query.rml_folder&&"query-attachments"==t.data.action&&window.rml.hooks.call("grid/request",[e,t,o,t.data.query.rml_folder])}catch(e){}})}),window.rml.hooks.register("grid/request",function(e,t,o,r,i){if(!(r<0)){var n=t.data.query.rml_type;n&&window.rml.hooks.call("grid/request/"+n,arguments)}}),window.rml.hooks.register("tree/afterInit/ML",function(e){var t=e(this),o=t.find(".aio-fixed-header");o.length>0&&e(document).scroll(function(){e(this).scrollTop()+o.outerHeight()+o.position().top>t.find(".aio-list-standard").offset().top?(t.addClass("aio-theme-wordpress-fixed"),o.addClass("aio-reached-overflow").css("min-width",t.children(".aio-wrap").width()-10+"px")):(t.removeClass("aio-theme-wordpress-fixed"),o.removeClass("aio-reached-overflow").css("min-width",""))})}),window.rml.hooks.register("tree/afterInit/modal",function(e,t,o){var r=o(this),i=r.find(".aio-fixed-header"),n=r.find(".aio-fixed-header-helper"),a=i.outerHeight();r.hasClass("aio-theme-wordpress-fixed")&&i.length>0&&n.length>0&&e.scroll(function(){var e=t.position().top;o(this).scrollTop()>r.find(".aio-list-standard").offset().top-e?(n.height(a),r.addClass("aio-theme-wordpress-fixed"),i.addClass("aio-reached-overflow").css({"min-width":r.children(".aio-wrap").width()-10+"px",top:e+"px"})):(r.removeClass("aio-theme-wordpress-fixed"),i.removeClass("aio-reached-overflow").css("min-width",""),n.height(0))})}),window.rml.hooks.register("tree/switch",function(e,t,o,r){window.rml.library.updateRestrictions(e,r(this))}),window.rml.hooks.register("tree/afterInit",function(e){e("body").data("rml")||(e(document).on("keydown",function(t){e("body").addClass("rml-holding")}),e(document).on("keyup",function(t){e("body").removeClass("rml-holding")}),e("body").data("rml",!0))}),window.rml.returnTrue=function(){return!0},window.rml.typeAccept[3]=window.rml.returnTrue,window.rml.typeAccept[4]=window.rml.returnTrue,window.rml.typeAccept[0]=window.rml.returnTrue,window.rml.typeAccept[1]=function(){return!1},window.rml.typeAccept[2]=function(e,t,o){var r=!1;return window.rml.library.iterateDraggedItems(e,t,function(e){e.find(".media-icon").hasClass("image-icon")||(r=!0)},function(e){"image"!=e.type&&(r=!0)}),!r},window.rml.hooks.register("tree/prepare/aioSettings/grid",function(e,t){e.others.onSwitchFolder=function(e,o){if(!RMLisAIO(t(this)))return!1;var r=e.attr("data-aio-id");e.attr("data-aio-type");return"AIO_NEW_TO_CREATE"!=r&&"AIO_NEW_TO_CREATE"!=o&&(t(this).allInOneTree("active",r,!0),t(t(this).allInOneTree("option").container.customSelectToChange).val(r.length>0?r:"all").change(),e.hasClass("needs-refresh")&&(t(this).allInOneTree("toolbarButton","refresh"),e.removeClass("needs-refresh")),setTimeout(function(){t(this).allInOneTree("reinit","movement")}.bind(this),500),window.rml.hooks.call("tree/switch",[e,e.attr("data-aio-id"),e.attr("data-aio-type")],this),!1)}}),window.rml.hooks.register("tree/afterInit/grid",function(e){var t=e(this);window.rml.hooks.register("grid/item/changed",function(){RMLisAIO(t)&&t.allInOneTree("reinit","movement")});var o=window.rml.library.getBackboneOfAIO(t);void 0!==o.view&&o.view.$(".media-button-backToLibrary").length>0&&t.allInOneTree("movement",!1),t.allInOneTree("active",t.allInOneTree("active"))}),window.rml.hooks.register("grid/item/removed",function(e,t,o,r){for(var i=e.attributes.id,n=0;n<t.models.length;n++)t.models[n].attributes.rmlIsShortcut===i&&(t.remove(t.models[n]),this.remove(t.models[n]))}),window.rml.hooks.register("grid/item/rendered",function(e,t,o){e.data("backboneModel",t);var r=t.attributes.rmlIsShortcut>0,i=e.children(".attachment-preview").children(".rml-shortcut-container");i.remove(),r>0?(e.addClass("rml-shortcut rml-shortcut-grid"),(i=o('<div class="rml-shortcut-container"><i class="fa fa-share rml-shortcut-icon"></i></div>').appendTo(e.children(".attachment-preview"))).tooltipster({contentAsHTML:!0,content:'<div class="aio-tooltip-title">'+rmlOpts.lang.shortcut+'</div><div class="aio-tooltip-text">'+rmlOpts.lang.shortcutInfo+"</p>",delay:300,theme:"tooltipster-aio",maxWidth:300})):e.removeClass("rml-shortcut rml-shortcut-grid")}),window.rml.hooks.register("ready/ML",function(e){if(e("body").hasClass("eml-grid")){var t=e("#wp-media-grid"),o=(e("#wpadminbar"),t.offset().top),r=function(){t.css("height",e(window).height()-e("#wpadminbar").height()-10)},i=function(){var r=e(window).scrollTop();t[0].style.top=(r>o?r:0)+"px"};e(window).on("resize",r),r(),e(window).on("scroll",i),i()}}),window.rml.hooks.register("tree/afterInit/list",function(e){window.rml.library.updateRestrictions(e(this).allInOneTree("active"),e(this))}),window.rml.library.warnDelete=function(){return confirm((commonL10n.warnDelete||"")+rmlOpts.lang.warnDelete)},window.rml.hooks.register("ready/ML",function(e){e(".rmlShortcutSpan").each(function(){var t=e(this).parents("tr").addClass("rmlIsShortcut").children("td.title").find(".media-icon");e('<div class="rml-shortcut-container"><i class="fa fa-share rml-shortcut-icon"></i></div>').appendTo(t).tooltipster({contentAsHTML:!0,content:'<div class="aio-tooltip-title">'+rmlOpts.lang.shortcut+'</div><div class="aio-tooltip-text">'+rmlOpts.lang.shortcutInfo+"</p>",delay:300,theme:"tooltipster-aio",maxWidth:300})})}),window.rml.hooks.register("newModal",function(e,t){var o,r=t(this).find(".media-menu"),i=t(this).parent().attr("id"),n="#"+i+" .attachment-filters-rml",a=!!r.data("rml");if(a?r.find(".aio-tree").remove():(r.append('<div class="separator"></div>'),r.data("rml",!0)),t(this).addClass("rml-media-modal"),t(this).find(".media-frame.hide-menu").removeClass("hide-menu"),!t(this).find(".media-button-reverse").is(":visible")){(o=t(".rml-container.rml-dummy").clone().appendTo(r)).removeClass("rml-dummy").addClass("rml-no-dummy"),window.rml.hooks.call("tree/prepare/modal",[o,a,n],this);var l=t.extend(!0,{},window.rml.defaultAioSettings,{container:{isListMode:!1,isModalMode:[r,t(this)],listMode:"grid",customSelectToChange:n,isSticky:!1,isResizable:!1,isWordpressModal:!0,theme:"wordpress wordpress-fixed"},movement:{selector:"#"+i+" ul.attachments > li"}});window.rml.hooks.call("tree/prepare/aioSettings",l,o),window.rml.hooks.call("tree/prepare/aioSettings/grid",l,o),window.rml.hooks.call("tree/prepare/aioSettings/modal",l,o),o.allInOneTree(l)}}),window.rml.hooks.register("general",function(e){setInterval(function(){e(".media-modal .attachments-browser").each(function(){var t=e(this).children("ul.attachments");e(this).is(":visible")&&!e(this).data("initialized")&&t.is(":visible")&&(e(this).data("initialized",!0),window.rml.hooks.call("newModal",e(this),e(this).parents(".media-modal")))}),e(".rml-shortcut-info:visible:not(.rml-shortcut-info-init)").each(function(){window.rml.library.showShortcutInfo(e(this))})},500)}),window.rml.hooks.register("tree/afterInit/modal",function(){var e=jQuery(this),t=window.rml.library.getBackboneOfAIO(e);if(t.view){var o=t.view.$(".attachment-filters-rml-loaded");if(o.length>0){var r=o.val();"all"!==r&&e.allInOneTree("active",r,!0)}}}),window.rml.hooks.register("ready/ML",function(e){var t,o=e(".wp-list-table.media tbody");o&&(o.sortable({disabled:!0,appendTo:"body",tolerance:"pointer",scrollSensitivity:50,placeholder:"ui-sortable-helper-wp-media-list",scrollSpeed:50,distance:10,cursor:"move",start:function(e,o){o.placeholder.height(o.helper[0].scrollHeight);var r=jQuery;t=r(".wp-list-table.media tbody tr:last").find('input[name="media[]"]').val()},update:function(e,o){var r,i,n=o.item.next();r=void 0!==n.html()&&n.find('input[name="media[]"]').val(),i=o.item.find('input[name="media[]"]').val(),window.rml.hooks.call("attachments/relocate",[window.rml.library.getObjectOfMediaPickerOrActive(),i,r,t,n,e,o])}}),window.rml.library.wpTableList=o)}),window.rml.hooks.register("ready",function(e){if(RMLFindDeep(window,"wp.media.view.Attachments")){var t=window.wp,o=t.media.view.Attachments;t.media.view.Attachments=t.media.view.Attachments.extend({initialize:function(){o.prototype.initialize.apply(this,arguments);var e=this.collection,t=this.collection.comparator,r="function"==typeof t;this.collection.comparator=function(o,i,n){if(void 0!==e.props.get("rml_folder")&&void 0!==o.attributes.rmlGalleryOrder&&void 0!==i.attributes.rmlGalleryOrder){var a=o.attributes.rmlGalleryOrder,l=i.attributes.rmlGalleryOrder;if(-1!=a&&-1!=l)return a<l?-1:a>l?1:0}if(r)return t.apply(this,arguments)}},initSortable:function(){var r=this.collection,i=this;!t.media.isTouchDevice&&this.options.sortable&&e.fn.sortable&&(this.options.sortable={appendTo:"body",tolerance:"pointer",scrollSensitivity:50,scrollSpeed:50,scroll:!0,distance:10,cursor:"move",start:function(e,t){t.item.data("lastId",r.models[r.models.length-1].id),t.item.data("sortableIndexStart",t.item.index())},update:function(e,t){var o,n=t.item.next(),a=t.item.data("id"),l=t.item.data("lastId");o=void 0!==n.html()&&n.data("id"),window.rml.hooks.call("attachments/relocate",[window.rml.library.getObjectOfMediaPickerOrActive(),a,o,l,n,e,t,i]);var s=r.at(t.item.data("sortableIndexStart")),d=r.comparator;delete r.comparator,r.remove(s,{silent:!0}),r.add(s,{silent:!0,at:t.item.index()}),r.comparator=d,r.trigger("reset",r),r.saveMenuOrder()}},o.prototype.initSortable.call(this))},refreshSortable:function(o){if(!t.media.isTouchDevice&&this.options.sortable&&e.fn.sortable){var r=this.collection,i=r.props.get("orderby"),n=o||"menuOrder"===i||!r.comparator;this.$el.sortable("option","disabled",!n)}}})}}),window.rml.hooks.register("attachments/relocate",function(e,t,o,r,i,n,a){var l={action:"rml_attachment_order",nonce:rmlOpts.nonces.attachmentOrder,folderId:e.attr("data-aio-id"),attachmentId:t,nextId:o,lastId:r};a.item.stop().fadeTo(100,.2),jQuery.post(rmlOpts.ajaxUrl,l,function(t){a.item.stop().fadeTo(100,1),window.rml.hooks.call("attachments/relocated",[e,l,t])})}),window.rml.hooks.register("grid/request",function(e,t,o,r,i){var n=!1,a=i(".rml-fid-"+r);if(!(r<0||!a||a.length<0||"1"!==a.attr("data-content-custom-order"))){try{(t.data.query.post_mime_type||t.data.query.monthnum||t.data.query.year)&&("all"!=t.data.query.post_mime_type||t.data.query.monthnum>0||t.data.query.year>0)&&(n=!0)}catch(e){}n?i("body").addClass("rml-view-gallery-filter-on"):i("body").removeClass("rml-view-gallery-filter-on"),t.data.query.order="ASC",t.data.query.orderby="rml";var l=i.param(t.data);e.data=l}}),window.rml.hooks.register("action/rml_attachment_order_by",function(e,t){e.orderby=t(this).parent().children("select").val()}),window.rml.hooks.register("action/done/rml_attachment_order_reset action/done/rml_attachment_order_by action/done/rml_attachment_order_by_last_custom",function(e,t,o){var r=e.method,i=e.action;"rml_attachment_order_by_last_custom"!==i&&o(".rml-fid-"+r).each(function(){o(this).attr("data-content-custom-order","rml_attachment_order_by"===i?"1":"0")}),o(".aio-tree-instance.rml-container").each(function(){o(this).allInOneTree("toolbarButton","refresh")})}),window.rml.hooks.register("ready/ML",function(e){e(document).on("click","form.rml-meta nav li",function(){var t=e(this).parents("form"),o=e(this).attr("data-key");e(this).parent().children().removeClass("nav-tab-active"),e(this).addClass("nav-tab-active"),t.find("table:visible").hide(),t.find('table[data-key="'+o+'"]').show(),window.rml.hooks.call("metadata/tab",[o,e(this)],t)})}),window.rml.hooks.register("metadata/save/failed usersettings/save/failed",function(e,t,o,r,i){window.rml.sweetAlert.enableButtons();var n="<li>"+e.data.errors.join("</li><li>")+"</li>";jQuery(".rml-meta-errors").html(n).show(),window.rml.library.sweetAlertPosition()}),window.rml.hooks.register("metadata/save/success usersettings/save/success",function(e,t,o,r,i){if(window.rml.sweetAlert.close(),e.data.newSlug){var n=t.folderId,a=e.data.newSlug,l=t.name;window.rml.hooks.call("folder/renamed",[n,l,a],this)}}),window.rml.hooks.register("metadata/loaded usersettings/loaded",function(e,t,o,r){var i=this;window.rml.sweetAlert({title:r("<div/>").text(o).html(),text:e,html:!0,confirmButtonText:rmlOpts.lang.save,cancelButtonText:rmlOpts.lang.close,closeOnConfirm:!1,showLoaderOnConfirm:!0,showCancelButton:!0},function(){var e=this;jQuery(".rml-meta-errors").hide(),window.rml.library.sweetAlertPosition();var t=jQuery("form.rml-meta").serializeArray(),r={};jQuery.each(t,function(e,t){r[t.name]=t.value}),r.action="rml_meta_save",r.nonce=rmlOpts.nonces.metaSave,jQuery.ajax({url:rmlOpts.ajaxUrl,type:"POST",data:r,success:function(t){"all"===r.folderId?window.rml.hooks.call("usersettings/save/"+(t.success?"success":"failed"),[t,r,e,""],i):window.rml.hooks.call("metadata/save/"+(t.success?"success":"failed"),[t,r,e,o],i)}})}),t&&setTimeout(function(){window.rml.hooks.call("metadata/dialog",[e,t,o],i)}.bind(this),500)}),window.rml.hooks.register("metadata/dialog",function(e,t,o,r){var i=r("body").hasClass("rml-view-gallery-filter-on"),n=r(".rml-meta-media-picker");n.length<=0||n.wpMediaPicker({label_add:rmlOpts.lang.metadata.coverImage.label_add,label_replace:rmlOpts.lang.metadata.coverImage.label_replace,label_remove:rmlOpts.lang.metadata.coverImage.label_remove,label_modal:rmlOpts.lang.metadata.coverImage.label_modal,label_button:rmlOpts.lang.metadata.coverImage.label_button,query:{post_mime_type:"image"},onShow:function(){r(".sweet-overlay,.sweet-alert").fadeOut()},onClose:function(){var e=this.wpWpMediaPicker.workflow.$el.parents(".rml-media-modal").removeClass("rml-media-modal");e.find(".rml-container").remove(),e.find(".attachments-browser").data("initialized",!1),r(".sweet-overlay,.sweet-alert").fadeIn(),i||r("body").removeClass("rml-view-gallery-filter-on")},htmlChange:function(){setTimeout(function(){n.parents("td").find(".spinner").remove(),r(".rml-meta-media-picker").parents("fieldset").show(),window.rml.library.sweetAlertPosition()}.bind(this),500)}})}),window.rml.hooks.register("ready",function(e){e(document).on("click",".rml-button-wipe, .sweet-alert a.actionbutton",function(t){if(window.confirm(rmlOpts.lang.wipe)){var o=e(this),r=o.attr("data-method"),i=e(this).attr("data-action");e(this).attr("id");o.html('<div class="spinner is-active" style="float: initial;margin: 0;"></div>').prop("disabled",!0),o.attr("disabled","disabled");var n={action:i,nonce:rmlOpts.nonces[e(this).attr("data-nonce-key")],method:r};window.rml.hooks.call("action/"+i,[n],o),jQuery.ajax({url:rmlOpts.ajaxUrl,data:n,method:o.attr("data-http-method")||"GET",success:function(e){window.rml.hooks.call("action/done/"+i,[n,e],o),o.html('<i class="fa fa-check"></i> '+(e.success?rmlOpts.lang.done:rmlOpts.lang.failed)).attr("disabled",!1)}})}return t.preventDefault(),!1})}),window.rml.hooks.register("action/done/rml_export",function(e,t,o){o("#rml_export_data textarea").get(0).value=t.data.str}),window.rml.hooks.register("action/rml_import",function(e,t){e.import=encodeURIComponent(t("#rml_import_data textarea").get(0).value)}),window.rml.hooks.register("ready/noMediaLibrary",function(e,t){var o=jQuery,r=o('<div class="rml-options"><nav><ul></ul></nav></div>').insertBefore(o('[for="rml_hide_upload_preview"]').parents("table").prev()).removeClass("rml-dummy"),i=o("<h2>Real Media Library</h2>").insertBefore(r),n=r.find("nav ul"),a=0;o('<a target="_blank" href="https://matthias-web.com/wordpress/real-media-library/add-ons/"><strong>Browse Add-Ons</strong></a>').insertAfter(i),o("table.form-table").each(function(){var e=o(this).prev(),t=e.html();if(void 0!==t&&0===t.indexOf("RealMediaLibrary")){t=t.split(":",2)[1];var i=o('<li class="nav-tab '+(0===a?"nav-tab-active":"")+'">'+t+"</li>").appendTo(n),l=o(this).appendTo(r);0===a&&l.show(),i.click(function(){r.children("table").hide(),n.find(".nav-tab-active").removeClass("nav-tab-active"),o(this).addClass("nav-tab-active"),l.show()}),e.remove(),a++}})}),window.rml.uploader={uploading:{},idFromSelect:function(){var e,t=jQuery(".attachments-filter-upload-chooser-fromSelect:visible");if(t.length>0&&(t=t.next().children("select"),(e=t.find('option[data-id="'+t.val()+'"]')).length>0))return{slug:e.attr("data-slug"),id:parseInt(t.val()),deny:""}},init:function(){var e=jQuery;void 0!==window.wp&&"function"==typeof wp.Uploader&&e.extend(wp.Uploader.prototype,{init:function(){window.rml.hooks.call("uploader/init",[],this),this.uploader.bind("FileFiltered",function(e,t){t.rmlFolderOpts=window.rml.uploader.idFromSelect()}),this.uploader.bind("FilesAdded",function(e,t){for(var o=0;o<t.length;o++){var r=window.rml.library.getObjectOfMediaPickerOrActive(),i=window.rml.uploader.settings(r,t[o],i);window.rml.uploader.uploading[t[o].attachment.cid]=i,t[o].rmlFolder=i.id,window.rml.uploader.prepareUpload(t[o],r,i),window.rml.hooks.call("uploader/FilesAddedSingle",[e,t[o],r,i],this)}}),this.uploader.bind("BeforeUpload",function(e,t){window.rml.hooks.call("uploader/BeforeUpload",[e,t],this);var o=e.settings.multipart_params;if(o.rmlFolder=t.rmlFolder,!o.rmlFolder){var r=window.rml.library.getObjectOfMediaPickerOrActive(),i=window.rml.uploader.settings(r,t,i);o.rmlFolder=i.id}}),this.uploader.bind("UploadProgress",function(e,t){window.rml.hooks.call("uploader/UploadProgress",[e,t],this),window.rml.uploader.progress(e,t)}),this.uploader.bind("UploadComplete",function(e,t){e.splice(),e.total.reset();try{window.rml.library.refreshAllCounts()}catch(e){}})},success:function(e){window.rml.hooks.call("upload/success",[e],this),window.rml.uploader.success(e)}})},success:function(e){var t=jQuery,o=t(".rml-uploading-"+e.cid);if(o.length>0){var r={action:"bulk_move",ids:[e.id],to:parseInt(o.attr("data-id"))},i=o.parents(".rml-container.rml-no-dummy"),n=i.allInOneTree("active").attr("data-aio-id"),a=e.get("rmlGalleryOrder"),l=-1===a?0:a,s=window.rml.library.getBackboneOfAIO(i);n===o.attr("data-id")&&s.view&&s.view.collection.add(e,{at:l}),o.find(".percent").css("width","100%"),o.find(".read_percent").html("100%"),o.remove(),window.rml.hooks.call("upload/success/moved",[e,r],this),jQuery(".rml-uploading").find(".rml-uploading-item").length<=0&&(i.allInOneTree("toolbarButton","refresh"),t(".rml-uploading").stop().slideUp(),window.rml.hooks.call("upload/success/movedAll",[],this))}},progress:function(e,t){var o=jQuery;t.percent-=1,t.percent<0&&(t.percent=0);var r=o(".rml-uploading-"+t.id),i=t.percent+"%";r.length>0&&(r.find(".percent").css("width",i),r.find(".read_percent").html(i),t.percent>98&&r.find(".percent").addClass("finish"))},settings:function(e,t){if("object"==typeof t.rmlFolderOpts)return t.rmlFolderOpts;var o=jQuery,r={slug:null,name:"",id:null,deny:""};if(e.length>0)r.slug=e.attr("data-slug"),void 0===r.slug&&(r.slug="/"),r.id=parseInt(e.attr("data-aio-id")),e.attr("data-restrictions").indexOf("ins")>-1?(r.slug="/",r.id=rmlOpts.root,r.deny='<div class="warnings">                    <span class="deny-gallery">'+rmlOpts.lang.toolbarItems.restrictions.ins+"</span>                </div>"):window.rml.hooks.call("uploadCheck",[r,e.attr("data-aio-type"),t],e);else{r.slug="/";var i=o(".attachment-filters.attachment-filters-rml");i.length>0&&"all"!=i.val()?r.id=parseInt(i.val()):r.id=rmlOpts.root}return r.id=isNaN(r.id)?"":r.id,r},prepareUpload:function(e,t,o){var r=jQuery,i=r('<div class="rml-uploading-item rml-uploading-'+e.attachment.cid+" rml-uploading-"+e.id+'""                    data-slug="'+o.slug+'"                     data-id="'+o.id+'">                <div class="left"></div>                <div class="right">                    <div class="filename">'+e.name+'</div>                    <div class="folder">                        <i class="fa fa-folder-o"></i> '+o.slug+"<br />                        "+window.rml.uploader.humanFileSize(e.size,!0)+' - <span class="read_percent">0%</span>                    </div>                    <div class="bar">                        <div class="percent"></div>                    </div>                    '+o.deny+'                </div>                <div class="rml-fix"></div>            </div>').appendTo(".rml-uploading-list");r(".rml-uploading").show();var n=r(new Image).appendTo(i.find(".left"));if(0==r(".rml-hide-upload-preview-1").length){var a=new mOxie.Image;a.onload=function(){a.downsize(48,48),n.prop("src",a.getAsDataURL())},a.load(e.getSource())}},humanFileSize:function(e,t){var o=t?1e3:1024;if(Math.abs(e)<o)return e+" B";var r=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],i=-1;do{e/=o,++i}while(Math.abs(e)>=o&&i<r.length-1);return e.toFixed(1)+" "+r[i]},secondsFormat:function(e){var t=Math.floor(e/3600),o=Math.floor((e-3600*t)/60),r=e-3600*t-60*o;return(t<10?"0"+t:t)+":"+(o<10?"0"+o:o)+":"+(r<10?"0"+r:r)}},window.rml.hooks.register("uploader/UploadProgress",function(e,t){jQuery(".rml-uploading-details-remain-bytes strong").html(window.rml.uploader.humanFileSize(e.total.bytesPerSec,!0)),jQuery(".rml-uploading-details-remain-loaded strong").html(window.rml.uploader.humanFileSize(e.total.loaded,!0)),jQuery(".rml-uploading-details-remain-loaded span").html(window.rml.uploader.humanFileSize(e.total.size,!0));var o=Math.floor((e.total.size-e.total.loaded)/e.total.bytesPerSec),r=e.total.queued,i=r>2?RMLFormat(rmlOpts.lang.uploadRemainFiles,r-2):"",n=jQuery(".rml-uploading-queue");i?n.html(i).show():n.hide().html(""),jQuery(".rml-uploading-details-remain-time strong").html(window.rml.uploader.secondsFormat(o))}),window.rml.hooks.register("general",function(e){setInterval(function(){e(".attachments-filter-upload-chooser").each(function(){var t=e(this).data("initialized"),o=e(this),r=e(this).next().children("select");t||(e(this).data("initialized",!0),o.parents(".attachments-browser").length>0?o.html(rmlOpts.lang.uploaderUsesLeftTree).show():(o.addClass("attachments-filter-upload-chooser-fromSelect"),o.parents(".uploader-inline-content").length>0&&(o.show(),o.next().show(),e.post(rmlOpts.ajaxUrl,{action:"rml_options_default",nonce:rmlOpts.nonces.treeContent}).done(function(e){e.success&&r.html(e.data)}))))})},500)}),window.rml.hooks.register("ready",function(e){if(e("body").hasClass("media-new-php")){if(prepareMediaItemInit){var t=prepareMediaItemInit;prepareMediaItemInit=function(o){if(t.apply(this,arguments),o.rmlFolderHTML){var r=e("#media-item-"+o.id).find(".filename");r.length>0&&r.after(o.rmlFolderHTML)}}}setTimeout(function(){uploader&&uploader.bind("BeforeUpload",function(t,o){var r=t.settings.multipart_params,i="/";if(r.rmlFolder=o.rmlFolder,!r.rmlFolder){var n=window.rml.uploader.idFromSelect();r.rmlFolder=n?n.id:-1,i=n?n.slug.toUpperCase():i}var a=e("#media-item-"+o.id).find(".filename");a.length>0&&(o.rmlFolderHTML='<div class="media-item-rml-folder">'+i+"</div>",a.after(o.rmlFolderHTML))})}.bind(this),500)}}),window.rml.hooks.register("uploadCheck",function(e,t,o,r){if("1"==t)e.slug="/",e.id=rmlOpts.root,e.deny='<div class="warnings">            <span class="deny-collection">'+rmlOpts.lang.uploadingCollection+"</span>        </div>";else if("2"==t){var i=["jpg","jpeg","jpe","gif","png"],n=o.name.substr(o.name.lastIndexOf(".")+1).toLowerCase();r.inArray(n,i)<=-1&&(e.slug="/",e.id=rmlOpts.root,e.deny='<div class="warnings">                <span class="deny-gallery">'+rmlOpts.lang.uploadingGallery+"</span>            </div>")}}),window.rml.hooks.register("tree/prepare/aioSettings",function(e,t){rmlOpts.hasUserSettings&&e.toolbarButtons.items.unshift({name:"settings",content:'<i class="fa fa-cog"></i>',onClick:function(){var e=t(this);window.rml.sweetAlert({title:"",text:'<div class="spinner is-active"></div><br /><br />',html:!0,showConfirmButton:!1}),t.ajax({url:rmlOpts.ajaxUrl,data:{action:"rml_meta_content",nonce:rmlOpts.nonces.metaContent,folderId:""},success:function(t){window.rml.hooks.call("usersettings/loaded",[t,"",rmlOpts.lang.toolbarItems.settings.toolTipTitle],e)}})},toolTipTitle:rmlOpts.lang.toolbarItems.settings.toolTipTitle,toolTipText:rmlOpts.lang.toolbarItems.settings.toolTipText})}),jQuery(function(){"inbound-email"!==RMLUrlParams().post_type&&function(e,t,o){!function e(t,o,r){function i(a,l){if(!o[a]){if(!t[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(n)return n(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var c=o[a]={exports:{}};t[a][0].call(c.exports,function(e){var o=t[a][1][e];return i(o||e)},c,c.exports,e,t,o,r)}return o[a].exports}for(var n="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(r,i,n){var a,l,s,d,c=function(e){return e&&e.__esModule?e:{default:e}},m=r("./modules/handle-dom"),u=r("./modules/utils"),p=r("./modules/handle-swal-dom"),f=r("./modules/handle-click"),h=c(r("./modules/handle-key")),w=c(r("./modules/default-params")),v=c(r("./modules/set-params"));n.default=s=d=function(){function r(e){var t=i;return t[e]===o?w.default[e]:t[e]}var i=arguments[0];if(m.addClass(t.body,"stop-scrolling"),p.resetInput(),i===o)return u.logStr("SweetAlert expects at least 1 attribute!"),!1;var n=u.extend({},w.default);switch(typeof i){case"string":n.title=i,n.text=arguments[1]||"",n.type=arguments[2]||"";break;case"object":if(i.title===o)return u.logStr('Missing "title" argument!'),!1;n.title=i.title;for(var s in w.default)n[s]=r(s);n.confirmButtonText=n.showCancelButton?"Confirm":w.default.confirmButtonText,n.confirmButtonText=r("confirmButtonText"),n.doneFunction=arguments[1]||null;break;default:return u.logStr('Unexpected type of argument! Expected "string" or "object", got '+typeof i),!1}v.default(n),p.fixVerticalPosition(),p.openModal(arguments[1]);for(var c=p.getModal(),g=c.querySelectorAll("button"),y=["onclick","onmouseover","onmouseout","onmousedown","onmouseup","onfocus"],b=function(e){return f.handleButton(e,n,c)},O=0;O<g.length;O++)for(var T=0;T<y.length;T++){var k=y[T];g[O][k]=b}p.getOverlay().onclick=b,a=e.onkeydown;e.onkeydown=function(e){return h.default(e,n,c)},e.onfocus=function(){setTimeout(function(){l!==o&&(l.focus(),l=o)},0)},d.enableButtons()},s.setDefaults=d.setDefaults=function(e){if(!e)throw new Error("userParams is required");if("object"!=typeof e)throw new Error("userParams has to be a object");u.extend(w.default,e)},s.close=d.close=function(){var r=p.getModal();m.fadeOut(p.getOverlay(),5),m.fadeOut(r,5),m.removeClass(r,"showSweetAlert"),m.addClass(r,"hideSweetAlert"),m.removeClass(r,"visible");var i=r.querySelector(".sa-icon.sa-success");m.removeClass(i,"animate"),m.removeClass(i.querySelector(".sa-tip"),"animateSuccessTip"),m.removeClass(i.querySelector(".sa-long"),"animateSuccessLong");var n=r.querySelector(".sa-icon.sa-error");m.removeClass(n,"animateErrorIcon"),m.removeClass(n.querySelector(".sa-x-mark"),"animateXMark");var s=r.querySelector(".sa-icon.sa-warning");return m.removeClass(s,"pulseWarning"),m.removeClass(s.querySelector(".sa-body"),"pulseWarningIns"),m.removeClass(s.querySelector(".sa-dot"),"pulseWarningIns"),setTimeout(function(){var e=r.getAttribute("data-custom-class");m.removeClass(r,e)},300),m.removeClass(t.body,"stop-scrolling"),e.onkeydown=a,e.previousActiveElement&&e.previousActiveElement.focus(),l=o,clearTimeout(r.timeout),!0},s.showInputError=d.showInputError=function(e){var t=p.getModal(),o=t.querySelector(".sa-input-error");m.addClass(o,"show");var r=t.querySelector(".sa-error-container");m.addClass(r,"show"),r.querySelector("p").innerHTML=e,setTimeout(function(){s.enableButtons()},1),t.querySelector("input").focus()},s.resetInputError=d.resetInputError=function(e){if(e&&13===e.keyCode)return!1;var t=p.getModal(),o=t.querySelector(".sa-input-error");m.removeClass(o,"show");var r=t.querySelector(".sa-error-container");m.removeClass(r,"show")},s.disableButtons=d.disableButtons=function(e){var t=p.getModal(),o=t.querySelector("button.confirm"),r=t.querySelector("button.cancel");o.disabled=!0,r.disabled=!0},s.enableButtons=d.enableButtons=function(e){var t=p.getModal(),o=t.querySelector("button.confirm"),r=t.querySelector("button.cancel");o.disabled=!1,r.disabled=!1},void 0!==e?e.sweetAlert=e.swal=s:u.logStr("SweetAlert is a frontend module!"),i.exports=n.default},{"./modules/default-params":2,"./modules/handle-click":3,"./modules/handle-dom":4,"./modules/handle-key":5,"./modules/handle-swal-dom":6,"./modules/set-params":8,"./modules/utils":9}],2:[function(e,t,o){var r={title:"",text:"",type:null,allowOutsideClick:!1,showConfirmButton:!0,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#8CD4F5",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null,customClass:"",html:!1,animation:!0,allowEscapeKey:!0,inputType:"text",inputPlaceholder:"",inputValue:"",showLoaderOnConfirm:!1};o.default=r,t.exports=o.default},{}],3:[function(t,o,r){var i=t("./utils"),n=(t("./handle-swal-dom"),t("./handle-dom")),a=function(e,t){var o=!0;n.hasClass(e,"show-input")&&((o=e.querySelector("input").value)||(o="")),t.doneFunction(o),t.closeOnConfirm&&sweetAlert.close(),t.showLoaderOnConfirm&&sweetAlert.disableButtons()},l=function(e,t){var o=String(t.doneFunction).replace(/\s/g,"");"function("===o.substring(0,9)&&")"!==o.substring(9,10)&&t.doneFunction(!1),t.closeOnCancel&&sweetAlert.close()};r.default={handleButton:function(t,o,r){function s(e){f&&o.confirmButtonColor&&(p.style.backgroundColor=e)}var d,c,m,u=t||e.event,p=u.target||u.srcElement,f=-1!==p.className.indexOf("confirm"),h=-1!==p.className.indexOf("sweet-overlay"),w=n.hasClass(r,"visible"),v=o.doneFunction&&"true"===r.getAttribute("data-has-done-function");switch(f&&o.confirmButtonColor&&(d=o.confirmButtonColor,c=i.colorLuminance(d,-.04),m=i.colorLuminance(d,-.14)),u.type){case"mouseover":s(c);break;case"mouseout":s(d);break;case"mousedown":s(m);break;case"mouseup":s(c);break;case"focus":var g=r.querySelector("button.confirm"),y=r.querySelector("button.cancel");f?y.style.boxShadow="none":g.style.boxShadow="none";break;case"click":var b=r===p,O=n.isDescendant(r,p);if(!b&&!O&&w&&!o.allowOutsideClick)break;f&&v&&w?a(r,o):v&&w||h?l(r,o):n.isDescendant(r,p)&&"BUTTON"===p.tagName&&sweetAlert.close()}},handleConfirm:a,handleCancel:l},o.exports=r.default},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],4:[function(o,r,i){var n=function(e,t){return new RegExp(" "+t+" ").test(" "+e.className+" ")},a=function(e){e.style.opacity="",e.style.display="block"},l=function(e){e.style.opacity="",e.style.display="none"};i.hasClass=n,i.addClass=function(e,t){n(e,t)||(e.className+=" "+t)},i.removeClass=function(e,t){var o=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(n(e,t)){for(;o.indexOf(" "+t+" ")>=0;)o=o.replace(" "+t+" "," ");e.className=o.replace(/^\s+|\s+$/g,"")}},i.escapeHtml=function(e){var o=t.createElement("div");return o.appendChild(t.createTextNode(e)),o.innerHTML},i._show=a,i.show=function(e){if(e&&!e.length)return a(e);for(var t=0;t<e.length;++t)a(e[t])},i._hide=l,i.hide=function(e){if(e&&!e.length)return l(e);for(var t=0;t<e.length;++t)l(e[t])},i.isDescendant=function(e,t){for(var o=t.parentNode;null!==o;){if(o===e)return!0;o=o.parentNode}return!1},i.getTopMargin=function(e){e.style.left="-9999px",e.style.display="block";var t,o=e.clientHeight;return t="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(e).getPropertyValue("padding-top"),10):parseInt(e.currentStyle.padding),e.style.left="",e.style.display="none","-"+parseInt((o+t)/2)+"px"},i.fadeIn=function(e,t){if(+e.style.opacity<1){t=t||16,e.style.opacity=0,e.style.display="block";var o=+new Date,r=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){e.style.opacity=+e.style.opacity+(new Date-o)/100,o=+new Date,+e.style.opacity<1&&setTimeout(r,t)});r()}e.style.display="block"},i.fadeOut=function(e,t){t=t||16,e.style.opacity=1;var o=+new Date,r=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){e.style.opacity=+e.style.opacity-(new Date-o)/100,o=+new Date,+e.style.opacity>0?setTimeout(r,t):e.style.display="none"});r()},i.fireClick=function(o){if("function"==typeof MouseEvent){var r=new MouseEvent("click",{view:e,bubbles:!1,cancelable:!0});o.dispatchEvent(r)}else if(t.createEvent){var i=t.createEvent("MouseEvents");i.initEvent("click",!1,!1),o.dispatchEvent(i)}else t.createEventObject?o.fireEvent("onclick"):"function"==typeof o.onclick&&o.onclick()},i.stopEventPropagation=function(t){"function"==typeof t.stopPropagation?(t.stopPropagation(),t.preventDefault()):e.event&&e.event.hasOwnProperty("cancelBubble")&&(e.event.cancelBubble=!0)}},{}],5:[function(t,r,i){var n=t("./handle-dom"),a=t("./handle-swal-dom");i.default=function(t,r,i){var l=t||e.event,s=l.keyCode||l.which,d=i.querySelector("button.confirm"),c=i.querySelector("button.cancel"),m=i.querySelectorAll("button[tabindex]");if(-1!==[9,13,32,27].indexOf(s)){for(var u=l.target||l.srcElement,p=-1,f=0;f<m.length;f++)if(u===m[f]){p=f;break}9===s?(u=-1===p?d:p===m.length-1?m[0]:m[p+1],n.stopEventPropagation(l),u.focus(),r.confirmButtonColor&&a.setFocusStyle(u,r.confirmButtonColor)):13===s?("INPUT"===u.tagName&&(u=d,d.focus()),u=-1===p?d:o):27===s&&!0===r.allowEscapeKey?(u=c,n.fireClick(u,l)):u=o}},r.exports=i.default},{"./handle-dom":4,"./handle-swal-dom":6}],6:[function(o,r,i){var n=function(e){return e&&e.__esModule?e:{default:e}},a=o("./utils"),l=o("./handle-dom"),s=n(o("./default-params")),d=n(o("./injected-html")),c=function(){var e=t.createElement("div");for(e.innerHTML=d.default;e.firstChild;)t.body.appendChild(e.firstChild)},m=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=t.querySelector(".sweet-alert");return e||(c(),e=m()),e}),u=function(){var e=m();return e?e.querySelector("input"):void 0},p=function(){return t.querySelector(".sweet-overlay")},f=function(e){if(e&&13===e.keyCode)return!1;var t=m(),o=t.querySelector(".sa-input-error");l.removeClass(o,"show");var r=t.querySelector(".sa-error-container");l.removeClass(r,"show")};i.sweetAlertInitialize=c,i.getModal=m,i.getOverlay=p,i.getInput=u,i.setFocusStyle=function(e,t){var o=a.hexToRgb(t);e.style.boxShadow="0 0 2px rgba("+o+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"},i.openModal=function(o){var r=m();l.fadeIn(p(),10),l.show(r),l.addClass(r,"showSweetAlert"),l.removeClass(r,"hideSweetAlert"),e.previousActiveElement=t.activeElement,r.querySelector("button.confirm").focus(),setTimeout(function(){l.addClass(r,"visible")},500);var i=r.getAttribute("data-timer");if("null"!==i&&""!==i){var n=o;r.timeout=setTimeout(function(){n&&"true"===r.getAttribute("data-has-done-function")?n(null):sweetAlert.close()},i)}},i.resetInput=function(){var e=m(),t=u();l.removeClass(e,"show-input"),t.value=s.default.inputValue,t.setAttribute("type",s.default.inputType),t.setAttribute("placeholder",s.default.inputPlaceholder),f()},i.resetInputError=f,i.fixVerticalPosition=function(){m().style.marginTop=l.getTopMargin(m())}},{"./default-params":2,"./handle-dom":4,"./injected-html":7,"./utils":9}],7:[function(e,t,o){o.default='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert"><div class="sa-icon sa-error">\n      <span class="sa-x-mark">\n        <span class="sa-line sa-left"></span>\n        <span class="sa-line sa-right"></span>\n      </span>\n    </div><div class="sa-icon sa-warning">\n      <span class="sa-body"></span>\n      <span class="sa-dot"></span>\n    </div><div class="sa-icon sa-info"></div><div class="sa-icon sa-success">\n      <span class="sa-line sa-tip"></span>\n      <span class="sa-line sa-long"></span>\n\n      <div class="sa-placeholder"></div>\n      <div class="sa-fix"></div>\n    </div><div class="sa-icon sa-custom"></div><h2>Title</h2>\n    <p>Text</p>\n    <fieldset>\n      <input type="text" tabIndex="3" />\n      <div class="sa-input-error"></div>\n    </fieldset><div class="sa-error-container">\n      <div class="icon">!</div>\n      <p>Not valid!</p>\n    </div><div class="sa-button-container">\n      <button class="cancel" tabIndex="2">Cancel</button>\n      <div class="sa-confirm-button-container">\n        <button class="confirm" tabIndex="1">OK</button><div class="la-ball-fall">\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>\n      </div>\n    </div></div>',t.exports=o.default},{}],8:[function(e,t,r){var i=e("./utils"),n=e("./handle-swal-dom"),a=e("./handle-dom"),l=["error","warning","info","success","input","prompt"];r.default=function(e){var t=n.getModal(),r=t.querySelector("h2"),s=t.querySelector("p"),d=t.querySelector("button.cancel"),c=t.querySelector("button.confirm");if(r.innerHTML=e.html?e.title:a.escapeHtml(e.title).split("\n").join("<br>"),s.innerHTML=e.html?e.text:a.escapeHtml(e.text||"").split("\n").join("<br>"),e.text&&a.show(s),e.customClass)a.addClass(t,e.customClass),t.setAttribute("data-custom-class",e.customClass);else{var m=t.getAttribute("data-custom-class");a.removeClass(t,m),t.setAttribute("data-custom-class","")}if(a.hide(t.querySelectorAll(".sa-icon")),e.type&&!i.isIE8()){var u=function(){for(var r=!1,i=0;i<l.length;i++)if(e.type===l[i]){r=!0;break}if(!r)return logStr("Unknown alert type: "+e.type),{v:!1};var s=o;-1!==["success","error","warning","info"].indexOf(e.type)&&(s=t.querySelector(".sa-icon.sa-"+e.type),a.show(s));var d=n.getInput();switch(e.type){case"success":a.addClass(s,"animate"),a.addClass(s.querySelector(".sa-tip"),"animateSuccessTip"),a.addClass(s.querySelector(".sa-long"),"animateSuccessLong");break;case"error":a.addClass(s,"animateErrorIcon"),a.addClass(s.querySelector(".sa-x-mark"),"animateXMark");break;case"warning":a.addClass(s,"pulseWarning"),a.addClass(s.querySelector(".sa-body"),"pulseWarningIns"),a.addClass(s.querySelector(".sa-dot"),"pulseWarningIns");break;case"input":case"prompt":d.setAttribute("type",e.inputType),d.value=e.inputValue,d.setAttribute("placeholder",e.inputPlaceholder),a.addClass(t,"show-input"),setTimeout(function(){d.focus(),d.addEventListener("keyup",swal.resetInputError)},400)}}();if("object"==typeof u)return u.v}if(e.imageUrl){var p=t.querySelector(".sa-icon.sa-custom");p.style.backgroundImage="url("+e.imageUrl+")",a.show(p);var f=80,h=80;if(e.imageSize){var w=e.imageSize.toString().split("x"),v=w[0],g=w[1];v&&g?(f=v,h=g):logStr("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+e.imageSize)}p.setAttribute("style",p.getAttribute("style")+"width:"+f+"px; height:"+h+"px")}t.setAttribute("data-has-cancel-button",e.showCancelButton),e.showCancelButton?d.style.display="inline-block":a.hide(d),t.setAttribute("data-has-confirm-button",e.showConfirmButton),e.showConfirmButton?c.style.display="inline-block":a.hide(c),e.cancelButtonText&&(d.innerHTML=a.escapeHtml(e.cancelButtonText)),e.confirmButtonText&&(c.innerHTML=a.escapeHtml(e.confirmButtonText)),e.confirmButtonColor&&(c.style.backgroundColor=e.confirmButtonColor,c.style.borderLeftColor=e.confirmLoadingButtonColor,c.style.borderRightColor=e.confirmLoadingButtonColor,n.setFocusStyle(c,e.confirmButtonColor)),t.setAttribute("data-allow-outside-click",e.allowOutsideClick);var y=!!e.doneFunction;t.setAttribute("data-has-done-function",y),e.animation?"string"==typeof e.animation?t.setAttribute("data-animation",e.animation):t.setAttribute("data-animation","pop"):t.setAttribute("data-animation","none"),t.setAttribute("data-timer",e.timer)},t.exports=r.default},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],9:[function(t,o,r){r.extend=function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e},r.hexToRgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?parseInt(t[1],16)+", "+parseInt(t[2],16)+", "+parseInt(t[3],16):null},r.isIE8=function(){return e.attachEvent&&!e.addEventListener},r.logStr=function(t){e.console&&e.console.log("SweetAlert: "+t)},r.colorLuminance=function(e,t){(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var o,r,i="#";for(r=0;3>r;r++)o=parseInt(e.substr(2*r,2),16),o=Math.round(Math.min(Math.max(0,o+o*t),255)).toString(16),i+=("00"+o).substr(o.length);return i}},{}]},{},[1]),"function"==typeof define&&define.amd?define(function(){return sweetAlert}):"undefined"!=typeof module&&module.exports&&(module.exports=sweetAlert)}(window,document),function(e){var t=e(window),o=window.document,r=e(o),i=function(){for(var e=3,t=o.createElement("div"),r=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",r[0];);return e>4?e:void 0}(),n=function(){var e=void 0!==window.pageXOffset?window.pageXOffset:"CSS1Compat"==o.compatMode?window.document.documentElement.scrollLeft:window.document.body.scrollLeft,t=void 0!==window.pageYOffset?window.pageYOffset:"CSS1Compat"==o.compatMode?window.document.documentElement.scrollTop:window.document.body.scrollTop;void 0===n.x&&(n.x=e,n.y=t),void 0===n.distanceX?(n.distanceX=e,n.distanceY=t):(n.distanceX=e-n.x,n.distanceY=t-n.y);var r=n.x-e,i=n.y-t;n.direction=0>r?"right":r>0?"left":0>=i?"down":i>0?"up":"first",n.x=e,n.y=t};t.on("scroll",n),e.fn.style=function(t){if(!t)return null;var r,i=e(this),n=i.clone().css("display","none");n.find("input:radio").attr("name","copy-"+Math.floor(100*Math.random()+1)),i.after(n);var a=function(e,t){var r;return e.currentStyle?r=e.currentStyle[t.replace(/-\w/g,function(e){return e.toUpperCase().replace("-","")})]:window.getComputedStyle&&(r=o.defaultView.getComputedStyle(e,null).getPropertyValue(t)),r=/margin/g.test(t)?parseInt(r)===i[0].offsetLeft?r:"auto":r};return"string"==typeof t?r=a(n[0],t):(r={},e.each(t,function(e,t){r[t]=a(n[0],t)})),n.remove(),r||null},e.fn.extend({hcSticky:function(o){return 0==this.length?this:(this.pluginOptions("hcSticky",{top:0,bottom:0,bottomEnd:0,innerTop:0,innerSticker:null,className:"sticky",wrapperClassName:"wrapper-sticky",stickTo:null,responsive:!0,followScroll:!0,offResolutions:null,onStart:e.noop,onStop:e.noop,on:!0,fn:null},o||{},{reinit:function(){e(this).hcSticky()},stop:function(){e(this).pluginOptions("hcSticky",{on:!1}).each(function(){var t=e(this),o=t.pluginOptions("hcSticky"),r=t.parent("."+o.wrapperClassName),i=t.offset().top-r.offset().top;t.css({position:"absolute",top:i,bottom:"auto",left:"auto",right:"auto"}).removeClass(o.className)})},off:function(){e(this).pluginOptions("hcSticky",{on:!1}).each(function(){var t=e(this),o=t.pluginOptions("hcSticky"),r=t.parent("."+o.wrapperClassName);t.css({position:"relative",top:"auto",bottom:"auto",left:"auto",right:"auto"}).removeClass(o.className),r.css("height","auto")})},on:function(){e(this).each(function(){e(this).pluginOptions("hcSticky",{on:!0,remember:{offsetTop:t.scrollTop()}}).hcSticky()})},destroy:function(){var o=e(this),r=o.pluginOptions("hcSticky"),i=o.parent("."+r.wrapperClassName);o.removeData("hcStickyInit").css({position:i.css("position"),top:i.css("top"),bottom:i.css("bottom"),left:i.css("left"),right:i.css("right")}).removeClass(r.className),t.off("resize",r.fn.resize).off("scroll",r.fn.scroll),o.unwrap()}}),o&&void 0!==o.on&&(o.on?this.hcSticky("on"):this.hcSticky("off")),"string"==typeof o?this:this.each(function(){var o=e(this),a=o.pluginOptions("hcSticky"),l=function(){var e=o.parent("."+a.wrapperClassName);return e.length>0&&(e.css({height:o.outerHeight(!0),width:function(){var t=e.style("width");return t.indexOf("%")>=0||"auto"==t?("border-box"==o.css("box-sizing")||"border-box"==o.css("-moz-box-sizing")?o.css("width",e.width()):o.css("width",e.width()-parseInt(o.css("padding-left")-parseInt(o.css("padding-right")))),t):o.outerWidth(!0)}()}),e)}()||function(){var t=o.style(["width","margin-left","left","right","top","bottom","float","display"]),r=o.css("display"),n=e("<div>",{class:a.wrapperClassName}).css({display:r,height:o.outerHeight(!0),width:t.width.indexOf("%")>=0||"auto"==t.width&&"inline-block"!=r&&"inline"!=r?(o.css("width",parseFloat(o.css("width"))),t.width):"auto"!=t.width||"inline-block"!=r&&"inline"!=r?"auto"==t["margin-left"]?o.outerWidth():o.outerWidth(!0):o.width(),margin:t["margin-left"]?"auto":null,position:function(){var e=o.css("position");return"static"==e?"relative":e}(),float:t.float||null,left:t.left,right:t.right,top:t.top,bottom:t.bottom,"vertical-align":"top"});return o.wrap(n),7===i&&0===e("head").find("style#hcsticky-iefix").length&&e('<style id="hcsticky-iefix">.'+a.wrapperClassName+" {zoom: 1;}</style>").appendTo("head"),o.parent()}();if(!o.data("hcStickyInit")){o.data("hcStickyInit",!0);var s=!(!a.stickTo||!("document"==a.stickTo||a.stickTo.nodeType&&9==a.stickTo.nodeType||"object"==typeof a.stickTo&&a.stickTo instanceof("undefined"!=typeof HTMLDocument?HTMLDocument:Document))),d=a.stickTo?s?r:"string"==typeof a.stickTo?e(a.stickTo):a.stickTo:l.parent();o.css({top:"auto",bottom:"auto",left:"auto",right:"auto"}),t.load(function(){o.outerHeight(!0)>d.height()&&(l.css("height",o.outerHeight(!0)),o.hcSticky("reinit"))});var c=function(e){o.hasClass(a.className)||(e=e||{},o.css({position:"fixed",top:e.top||0,left:e.left||l.offset().left}).addClass(a.className),a.onStart.apply(o[0]),l.addClass("sticky-active"))},m=function(e){(e=e||{}).position=e.position||"absolute",e.top=e.top||0,e.left=e.left||0,("fixed"==o.css("position")||parseInt(o.css("top"))!=e.top)&&(o.css({position:e.position,top:e.top,left:e.left}).removeClass(a.className),a.onStop.apply(o[0]),l.removeClass("sticky-active"))},u=!1,p=!1,f=function(){if(w(),h(),a.on){if(a.responsive){p||(p=o.clone().attr("style","").css({visibility:"hidden",height:0,overflow:"hidden",paddingTop:0,paddingBottom:0,marginTop:0,marginBottom:0}),l.after(p));var e=l.style("width"),t=p.style("width");"auto"==t&&"auto"!=e&&(t=parseInt(o.css("width"))),t!=e&&l.width(t),u&&clearTimeout(u),u=setTimeout(function(){u=!1,p.remove(),p=!1},250)}if("fixed"==o.css("position")?o.css("left",l.offset().left):o.css("left",0),o.outerWidth(!0)!=l.width()){var r="border-box"==o.css("box-sizing")||"border-box"==o.css("-moz-box-sizing")?l.width():l.width()-parseInt(o.css("padding-left"))-parseInt(o.css("padding-right"));r=r-parseInt(o.css("margin-left"))-parseInt(o.css("margin-right")),o.css("width",r)}}};o.pluginOptions("hcSticky",{fn:{scroll:function(r){if(a.on&&o.is(":visible")){if(o.outerHeight(!0)>=d.height())return void m();var i,u=a.innerSticker?e(a.innerSticker).position().top:a.innerTop?a.innerTop:0,p=l.offset().top,f=d.height()-a.bottomEnd+(s?0:p),h=l.offset().top-a.top+u,w=o.outerHeight(!0)+a.bottom,v=t.height(),g=t.scrollTop(),y=o.offset().top,b=y-g;if(void 0!==a.remember&&a.remember){var O=y-a.top-u;return void(w-u>v&&a.followScroll?g>O&&g+v<=O+o.height()&&(a.remember=!1):a.remember.offsetTop>O?O>=g&&(c({top:a.top-u}),a.remember=!1):g>=O&&(c({top:a.top-u}),a.remember=!1))}g>h?f+a.bottom-(a.followScroll&&w>v?0:a.top)<=g+w-u-(w-u>v-(h-u)&&a.followScroll&&(i=w-v-u)>0?i:0)?m({top:f-w+a.bottom-p}):w-u>v&&a.followScroll?v>=b+w?"down"==n.direction?c({top:v-w}):0>b&&"fixed"==o.css("position")&&m({top:y-(h+a.top-u)-n.distanceY}):"up"==n.direction&&y>=g+a.top-u?c({top:a.top-u}):"down"==n.direction&&y+w>v&&"fixed"==o.css("position")&&m({top:y-(h+a.top-u)-n.distanceY}):c({top:a.top-u}):m()}},resize:f}});var h=function(){if(a.offResolutions){e.isArray(a.offResolutions)||(a.offResolutions=[a.offResolutions]);var r=!0;e.each(a.offResolutions,function(e,i){0>i?t.width()<-1*i&&(r=!1,o.hcSticky("off")):t.width()>i&&(r=!1,o.hcSticky("off"))}),r&&!a.on&&o.hcSticky("on")}};h(),t.on("resize",f);var w=function(){var o=!1;void 0!=e._data(window,"events").scroll&&e.each(e._data(window,"events").scroll,function(e,t){t.handler==a.fn.scroll&&(o=!0)}),o||(a.fn.scroll(!0),t.on("scroll",a.fn.scroll))};w()}}))}})}(jQuery),function(e){e.fn.extend({pluginOptions:function(t,o,r,i){return this.data(t)||this.data(t,{}),t&&void 0===o?this.data(t).options:"object"==typeof(r=r||o||{})||void 0===r?this.each(function(){var n=e(this);n.data(t).options?n.data(t,e.extend(n.data(t),{options:e.extend(n.data(t).options,r||{})})):(n.data(t,{options:e.extend(o,r||{})}),i&&(n.data(t).commands=i))}):"string"==typeof r?this.each(function(){e(this).data(t).commands[r].call(this)}):this}})}(jQuery)}),window.rml.hooks.call("general"),jQuery(document).ready(function(){if(rmlOpts){RMLFindDeep(window,"wp.media")&&window.rml.uploader.init();var e,t=jQuery,o="list"==rmlOpts.listMode;if(window.rml.sweetAlert=sweetAlert,("ontouchstart"in window||window.navigator.maxTouchPoints)&&t("body").addClass("rml-touch"),t(document).on("click",".rml-migration-dismiss",function(e){var o=t(this).attr("data-build");return jQuery.post(rmlOpts.ajaxUrl,{action:"rml_migrate_dismiss",nonce:rmlOpts.nonces.migrateDismiss,build:o}),t(this).parents(".notice").slideUp(),e.preventDefault(),!1}),window.rml.hooks.call("ready"),window.rml.defaultAioSettings={container:{listMode:rmlOpts.listMode,isMediaLibrary:!1,isModalMode:!1,tooltipsterSettings:{speed:0},theme:"wordpress",onRearrangeRelocate:function(e,t,o,r,i,n,a,l){var l=arguments;jQuery.post(rmlOpts.ajaxUrl,{action:"rml_relocate",nonce:rmlOpts.nonces.bulkSort,id:e,parent:t,nextId:i},function(e){e.success?(o.resolve(),window.rml.hooks.call("folder/relocated",l,this)):(o.reject(),sweetAlert("Oops...",e.data,"error"))}.bind(this))},doNotUseSaveInRearrange:!0},toolbarButtons:{items:[{name:"order",content:'<i class="fa fa-arrows"></i>',labelBack:rmlOpts.lang.done,onPreDisable:function(){var e=t(this).allInOneTree("active");return e&&"2"!==e.attr("data-content-custom-order")},onAllowed:function(){if(t("body").hasClass("rml-view-gallery-filter-on"))return window.rml.sweetAlert("Oops...",rmlOpts.lang.orderFailedFilterOn,"error"),!1;var e=t(this).allInOneTree("active"),o=e.attr("data-content-custom-order"),r=function(e){sweetAlert({title:rmlOpts.lang.sortConfirmTitle,text:rmlOpts.lang.sortConfirmText,showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:rmlOpts.lang.sortConfirmTitle,cancelButtonText:rmlOpts.lang.cancel,imageUrl:rmlOpts.pluginUrl+"assets/image/find-details.png",html:!0},e)}.bind(this),i=t(this).allInOneTree("option","container.listMode");return"list"===i&&"1"!==rmlOpts.wpListModeOrder&&void 0!==window.rml.library.wpTableList?("1"!==o?r(function(){window.location.href=rmlOpts.wpListModeOrder}):window.location.href=rmlOpts.wpListModeOrder,!1):("list"!==i&&"1"!==o&&r(function(){e.attr("data-content-custom-order","1"),t(this).allInOneTree("toolbarButton","refresh")}.bind(this)),!0)},onClick:function(){var e=window.rml.library.getBackboneOfAIO(t(this));if(t(this).allInOneTree("movement",!1),e.view)e.view.attachments.refreshSortable(!0);else{var o=window.rml.library.wpTableList;void 0!==o&&(o.sortable("enable"),o.disableSelection())}},onCancel:function(){var e=window.rml.library.getBackboneOfAIO(t(this));if(t(this).allInOneTree("movement",!0),e.view)e.view.attachments.refreshSortable(!1);else{var o=window.rml.library.wpTableList;void 0!==o&&(o.sortable("disable"),o.enableSelection())}},toolTipTitle:rmlOpts.lang.toolbarItems.order.toolTipTitle,toolTipText:rmlOpts.lang.toolbarItems.order.toolTipText,toolTipTextDisabledLink:rmlOpts.lang.toolbarItems.order.toolTipTextDisabledLink},{name:"refresh",content:'<i class="fa fa-refresh"></i>',onClick:function(){window.rml.hooks.call("tree/refresh",!1,this)},toolTipTitle:rmlOpts.lang.toolbarItems.refresh.toolTipTitle,toolTipText:rmlOpts.lang.toolbarItems.refresh.toolTipText},{name:"rename",content:'<i class="fa fa-pencil"></i>',visibleInActiveFolderType:["0","1","2"],onSave:function(e,o){t(this).allInOneTree("loader",!0),jQuery.post(rmlOpts.ajaxUrl,{action:"rml_folder_rename",nonce:rmlOpts.nonces.folderRename,name:o,id:e},function(r){t(this).allInOneTree("loader",!1),r.success?(t(this).allInOneTree("toolbarButton","rename"),window.rml.hooks.call("folder/renamed",[e,o,r.data.slug],this)):sweetAlert("Oops...",r.data.join(),"error")}.bind(this))},usePredefinedFunction:"rename",toolTipTitle:rmlOpts.lang.toolbarItems.rename.toolTipTitle,toolTipText:rmlOpts.lang.toolbarItems.rename.toolTipText,toolTipTextDisabledLink:rmlOpts.lang.toolbarItems.rename.toolTipTextDisabledLink},{name:"delete",content:'<i class="fa fa-trash-o"></i>',visibleInActiveFolderType:["0","1","2"],onClick:function(){var e=t(this).allInOneTree("active"),o=e.attr("data-slug"),r=parseInt(e.attr("data-aio-id"));o&&(e.parent().children("ul").children("li").length>0?sweetAlert("Oops...",rmlOpts.lang.deleteFailed,"error"):sweetAlert({title:rmlOpts.lang.deleteConfirmTitle,text:rmlOpts.lang.deleteConfirm,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:rmlOpts.lang.deleteConfirmSubmit,cancelButtonText:rmlOpts.lang.deleteConfirmCancel,closeOnConfirm:!1},function(){t(this).allInOneTree("loader",!0),jQuery.post(rmlOpts.ajaxUrl,{action:"rml_folder_delete",nonce:rmlOpts.nonces.folderDelete,id:r},function(o){t(this).allInOneTree("loader",!1),o.success?(t(this).allInOneTree("remove",e),window.rml.hooks.call("folder/removed",r,this)):sweetAlert("Oops...",o.data.join(),"error")}.bind(this)),sweetAlert.close()}.bind(this)))},toolTipTitle:rmlOpts.lang.toolbarItems.delete.toolTipTitle,toolTipText:rmlOpts.lang.toolbarItems.delete.toolTipText,toolTipTextDisabledLink:rmlOpts.lang.toolbarItems.delete.toolTipTextDisabledLink},{name:"rearrange",content:'<i class="fa fa-sort"></i>',usePredefinedFunction:"rearrange",labelBack:rmlOpts.lang.done,toolTipTitle:rmlOpts.lang.toolbarItems.rearrange.toolTipTitle,toolTipText:rmlOpts.lang.toolbarItems.rearrange.toolTipText,onAllowed:function(){return!t(this).hasClass("aio-searching")||(window.rml.sweetAlert("Oops...",rmlOpts.lang.searchRearrange,"error"),!1)}},{name:"details",content:'<i class="fa fa-chevron-circle-down"></i>',visibleInActiveFolderType:["0","1","2","4"],toolTipTitle:rmlOpts.lang.toolbarItems.details.toolTipTitle,toolTipText:rmlOpts.lang.toolbarItems.details.toolTipText,toolTipTextDisabledLink:rmlOpts.lang.toolbarItems.details.toolTipTextDisabledLink,onAllowed:function(){return!0!==window.rml.library.isMediaLibrary?(window.rml.sweetAlert("Oops...",rmlOpts.lang.detailsFailedOn,"error"),!1):!(t(".rml-meta-media-picker").length>0&&t(".rml-meta-media-picker").parents(".sweet-alert.hideSweetAlert").length<=0)||(window.rml.sweetAlert("Oops...",rmlOpts.lang.detailsFailedAlreadyOpen,"error"),!1)},onClick:function(){var e=t(this),o=t(this).allInOneTree("active"),r=o.find(".aio-node-name").text(),i=o.attr("data-aio-id");window.rml.sweetAlert({title:"",text:'<div class="spinner is-active"></div><br /><br />',html:!0,showConfirmButton:!1}),t.ajax({url:rmlOpts.ajaxUrl,data:{action:"rml_meta_content",nonce:rmlOpts.nonces.metaContent,folderId:i},invokeData:{fid:i,name:r},success:function(t){window.rml.hooks.call("metadata/loaded",[t,this.invokeData.fid,this.invokeData.name],e)}})}}],labelBack:rmlOpts.lang.cancel},createTypes:[{type:"0",name:"folder",icon:'<i class="fa fa-folder-open"></i><i class="fa fa-folder"></i>',cssClasses:"page-title-action add-new-h2",visibleInActiveFolderType:["0","3","4"],label:'<i class="fa fa-folder-open-o"></i>&nbsp;<i class="fa fa-plus"></i>',toolTipTitle:rmlOpts.lang.createTypes.folder.toolTipTitle,toolTipText:rmlOpts.lang.createTypes.folder.toolTipText},{type:"1",name:"collection",icon:'<i class="mwf-collection"></i>',cssClasses:"page-title-action add-new-h2",visibleInActiveFolderType:["0","1","3","4"],label:'<i class="mwf-collection"></i>&nbsp;&nbsp;<i class="fa fa-plus"></i>',toolTipTitle:rmlOpts.lang.createTypes.collection.toolTipTitle,toolTipText:rmlOpts.lang.createTypes.collection.toolTipText},{type:"2",name:"gallery",icon:'<i class="mwf-gallery"></i>',cssClasses:"page-title-action add-new-h2",visibleInActiveFolderType:["1"],label:'<i class="mwf-gallery"></i>&nbsp;&nbsp;<i class="fa fa-plus"></i>',toolTipTitle:rmlOpts.lang.createTypes.gallery.toolTipTitle,toolTipText:rmlOpts.lang.createTypes.gallery.toolTipText}],createCancel:{label:rmlOpts.lang.cancel,cssClasses:"page-title-action add-new-h2"},movement:{selector:"#wpbody-content ul.attachments > li, .wp-list-table.media tbody tr",onGetLabel:function(e){var o=t();window.rml.library.iterateDraggedItems(jQuery(e),t(this),function(e){t.merge(o,e)},function(e){t.merge(o,this.browser.find('li[data-id="'+e.id+'"]'))});var r=o.length>0?o.length:1;o.filter(".rml-shortcut").length>0?t("body").addClass("rml-holding-shortcuts"):t("body").removeClass("rml-holding-shortcuts"),t("body").removeClass("rml-holding");var i=r>1?rmlOpts.lang.moveMultipleFiles:rmlOpts.lang.moveSingleFile,n=r>1?rmlOpts.lang.appendMultipleFiles:rmlOpts.lang.appendSingleFile;return'<div class="rml-movement-move"><i class="fa fa-arrow-right" style="margin-right:5px;"></i> '+RMLFormat(i,r)+"</div>"+('<div class="rml-movement-append"><i class="fa fa-share rml-shortcut-icon" style="margin-right:5px;"></i> '+RMLFormat(n,r)+"</div>")},onGetHelper:function(e){return t('<div class="aio-movement-helper rml-movement-helper">'+e+"</div>")},droppableSettings:{accept:function(e){var o,r=t(this).parents(".aio-tree");try{var i=t(this).attr("data-aio-type");o=window.rml.typeAccept[i].bind(this)(e,r)}catch(e){}return o},drop:function(e,o){t(e.target).addClass("needs-refresh");var r=t(this).parents(".aio-tree"),i=[],n=t("body").hasClass("rml-holding"),a=t(e.target).attr("data-aio-id"),l=r.allInOneTree("active").attr("data-aio-id"),s=[],d=function(e){for(var t=0;t<s.length;t++)e.bind(s[t])()};window.rml.library.iterateDraggedItems(o.draggable,r,function(e){i.push(parseInt(e.find('input[name="media[]"]').attr("value"))),s.push(e)},function(e){i.push(e.id),s.push(this.browser.find('li[data-id="'+e.id+'"]'))});var c=function(){r.allInOneTree("loader",!0),d(function(){t(this).fadeTo(250,.3)}),window.rml.hooks.call("attachments/move",[i,a,n],r),jQuery.post(rmlOpts.ajaxUrl,{action:"rml_bulk_move",nonce:rmlOpts.nonces.bulkMove,ids:i,to:a,isShortcut:n},function(e){e.success?((""==l&&n||n&&l==a)&&r.allInOneTree("toolbarButton","refresh"),d(function(){!r.data("isListMode")&&t(this).hasClass("selected")&&t(this).children(".attachment-preview").length>0&&t(this).children(".attachment-preview").click(),n||!n&&l==a||""==l?t(this).fadeTo(0,1):t(this).remove()}),r.data("isListMode")&&t(".wp-list-table.media tbody tr").length<=0&&t(".wp-list-table.media tbody").html('<tr class="no-items"><td class="colspanchange" colspan="6">'+rmlOpts.lang.noMedia+"</td></tr></tbody>"),window.rml.library.refreshCount(r,function(){r.allInOneTree("loader",!1)}),window.rml.hooks.call("attachments/moved",[i,a,n],r)):(d(function(){t(this).fadeTo(0,1)}),window.rml.sweetAlert("Oops...",e.data.join(),"error"),r.allInOneTree("loader",!1))})};""==t(this).attr("data-aio-id")?window.rml.sweetAlert({title:rmlOpts.lang.deleteConfirmTitle,text:rmlOpts.lang.moveFromAllConfirmText,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:rmlOpts.lang.moveFromAllConfirmSubmit,cancelButtonText:rmlOpts.lang.deleteConfirmCancel},function(){c()}):c()}}},others:{rootParentId:rmlOpts.root,onCreateFolder:function(e,o,r,i){t(this).allInOneTree("loader",!0);var n=arguments;jQuery.post(rmlOpts.ajaxUrl,{action:"rml_folder_create",nonce:rmlOpts.nonces.folderCreate,name:e,parent:r,type:o.type},function(e){t(this).allInOneTree("loader",!1),e.success?window.rml.hooks.call("createdBeforeRendering",[n,e],t(this)):sweetAlert("Oops...",t("<div/>").html(e.data.join()).text(),"error")}.bind(this))},labelRearrangeSave:rmlOpts.lang.save,onAfterFinish:function(){var e=t(this).allInOneTree("option").container,o=e.listMode,r=e.isMediaLibrary,i=e.isModalMode,n=t(this),a=n.allInOneTree("option","container.customSelectToChange"),l=RMLUrlParams().rml_folder||"";t(this).show().addClass("rml-mode-"+o),"list"===o&&"#order"===window.location.hash&&(t(this).allInOneTree("toolbarButton","order"),window.location.hash=""),t(this).hasClass("aio-lazy")&&(a&&(a=jQuery(a))&&n.allInOneTree("option","container.isModalMode")&&(l=a.val()),window.rml.library.initializeTreeContentLoader(l,t(this)).done(function(e){var a=window.rml.library.getBackboneOfAIO(n);a.view&&a.view._treeLoaded.resolve(e),t(this).allInOneTree("nodesHTML",t(e.data.nodes).html(),!0,l),t(this).allInOneTree("counts",{"-1":e.data.cntRoot}),window.rml.hooks.call("tree/afterInit",!1,n),window.rml.hooks.call("tree/afterInit/"+o,!1,n),r&&(window.rml.hooks.call("tree/afterInit/ML",!1,n),window.rml.hooks.call("tree/afterInit/ML/"+o,!1,n)),!1!==i&&window.rml.hooks.call("tree/afterInit/modal",i,n)}.bind(this)))},onSwitchFolder:function(e,t){},onTypeButtonClicked:function(e,t){t.stopImmediatePropagation&&t.stopImmediatePropagation()}}},t("body").hasClass("wp-admin")&&t("body").hasClass("upload-php")){window.rml.hooks.call("ready/ML"),window.rml.library.isMediaLibrary=!0,t("body").addClass("upload-php-mode-"+rmlOpts.listMode+" activate-aio"),(e=t(".rml-container.rml-dummy").clone().prependTo("body.wp-admin.upload-php #wpbody")).removeClass("rml-dummy").addClass("rml-no-dummy"),window.rml.hooks.call("tree/prepare/ML",!1,this),window.rml.library.container=e;var r=t.extend(!0,{},window.rml.defaultAioSettings,{container:{isMediaLibrary:!0,customSelectToChange:"#wpbody-content .attachment-filters-rml",resizeOpposite:"#wpbody-content",theme:"wordpress",hcStickySettings:{top:32,bottom:50,offResolutions:-700},onResizeFinished:function(e){jQuery.post(rmlOpts.ajaxUrl,{action:"rml_sidebar_resize",nonce:rmlOpts.nonces.sidebarResize,width:e},function(e){});var o;"grid"===t(this).allInOneTree("option","container.listMode")&&(o=window.rml.library.getBackboneOfAIO(t(this)))&&o.view.attachments.setColumns()}}});window.rml.hooks.call("tree/prepare/aioSettings",r,e),window.rml.hooks.call("tree/prepare/aioSettings/"+rmlOpts.listMode,r,e),e.data("isListMode",o),e.allInOneTree(r)}else window.rml.library.customLists(),window.rml.hooks.call("ready/noMediaLibrary");jQuery(document).on("change",".rml-folder-edit select",function(){jQuery(this).css("opacity","1")})}});